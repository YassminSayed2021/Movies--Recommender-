

@if (isOpen) {
  <div class="chat-container">
    <div class="card shadow-sm mx-auto">
      
      <div class="card-header d-flex justify-content-between align-items-center"
           >
        <h5 class="mb-0">
          <i class="fas fa-film me-2"></i> MovieBot
        </h5>
        <button class="btn btn-outline-light btn-sm" (click)="toggleChat()" aria-label="Close chat">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="card-body overflow-auto flex-grow-1 p-3" >
        @for (msg of messages; track msg) {
          <div class="d-flex mb-3"
               [class.justify-content-end]="msg.sender === 'user'" 
               [class.justify-content-start]="msg.sender === 'bot'">
            <div class="message p-3 rounded shadow-sm"
                 [ngStyle]="{
                   'background-color': msg.sender === 'user' ? '#dc3545' : '#3a3a3a',
                   'color': msg.sender === 'user' ? '#fff' : '#ddd'
                 }"
>           @if (msg.sender === 'user') {
                <small class="fw-bold d-block mb-1">You</small>
              } @else {
                <small class="fw-bold d-block mb-1">MovieBot</small>
              }
              <p class="mb-0">{{ msg.text }}</p>
            </div>
          </div>
        }
      </div>

      <div class="card-footer bg-dark d-flex align-items-center">
        <input type="text" class="form-control me-2 text-white bg-secondary border-0"
               placeholder="Type your message..." [(ngModel)]="userMessage"
               (keydown.enter)="sendMessage()" />
        <button class="btn btn-danger" (click)="sendMessage()" aria-label="Send message">
          <i class="fas fa-location-arrow"></i>
        </button>
      </div>
    </div>
  </div>
} @else {
  <div class="chat-toggle-button">
    <button class="btn btn-danger rounded-circle p-3 shadow-lg" (click)="toggleChat()" aria-label="Open chat">
      <i class="fas fa-comments fa-lg"></i>
    </button>
  </div>
}



